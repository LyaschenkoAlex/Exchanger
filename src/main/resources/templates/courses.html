<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Exchanger</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.3.0/Chart.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

</head>

<body>
<div class="table-responsive">
    <div th:switch="${role}">
        <a th:case="'anonymousUser'" th:href="login">Login</a>
        <a th:case="*" th:href="main_page">Go to the main page</a>
    </div>
<!--    <a href="#" th:text="${role}"></a>-->
    <table class="table table-striped table-bordered">
        <tr>
            <th class="text-left" scope="col" style="width: 16.66%"></th>
            <th class="text-left" style="width: 16.66%">sell USD</th>
            <th class="text-left" style="width: 16.66%">buy USD</th>
            <th class="text-left" style="width: 16.66%">sell EUR</th>
            <th class="text-left" style="width: 16.66%">buy EUR</th>
            <th class="text-left" style="width: 16.66%">sell RUB</th>
            <th class="text-left" style="width: 16.66%">buy RUB</th>
        </tr>
        <th:block th:each="map : ${coursesAndBanks}">
            <th:block th:each="element : ${map}">
                <tr>
                    <th th:text="${element.key}" class="text-left" scope="col" style="width: 16.66%"></th>
                    <td class="text-left" style="width: 16.66%" th:text="${element.value.getBuyUSD()}"></td>
                    <td class="text-left" style="width: 16.66%" th:text="${element.value.getSellUSD()}"></td>
                    <td class="text-left" style="width: 16.66%" th:text="${element.value.getBuyEUR()}"></td>
                    <td class="text-left" style="width: 16.66%" th:text="${element.value.getSellEUR()}"></td>
                    <td class="text-left" style="width: 16.66%" th:text="${element.value.getBuyRUB()}"></td>
                    <td class="text-left" style="width: 16.66%" th:text="${element.value.getSellRUB()}"></td>
                </tr>
            </th:block>
        </th:block>
    </table>
</div>
<div class="wrapper">
    <canvas id="myChart" style="width:1000px !important; height: 600px !important;"></canvas>
</div>
</body>
<script th:inline="javascript">
    // Our labels along the x-axis
    // var years = [1500, 1600, 1700, 1750, 1800, 1850, 1900, 1950, 1999, 2050];
    var date = [[${courseDate}]];
    var EUR = [[${courseEUR}]];
    var USD = [[${courseUSD}]];
    var RUB = [[${courseRUB}]];

    var ctx = document.getElementById("myChart");
    // ctx.width(800);
    ctx.height = 100;
    var myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: date,
            options: {
                maintainAspectRatio: false,
                responsive: true
            },
            datasets: [
                {
                    data: EUR,
                    label: "EUR",
                    borderColor: "#3e95cd",
                    fill: false
                },
                {
                    data: USD,
                    label: "USD",
                    borderColor: "#8e5ea2",
                    fill: false
                },
                {
                    data: RUB,
                    label: "RUB",
                    borderColor: "#ba3312",
                    fill: false
                }
            ]
        }
    });
</script>
</html>
